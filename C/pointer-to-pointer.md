# ν¬μΈν„°μ™€ μ°¨μ›μ κ΄€κ³„

ν¬μΈν„°μ μ°¨μ›μ€ μμ‹ μ΄ κ°€λ¦¬ν‚¤λ” λ€μƒλ§νΌ μ¦κ°€ν•©λ‹λ‹¤. μ°¨μ›μ΄ λμ–΄λ‚ μλ΅, μ‚¬μ¬μ²λΌ λ¨λ“  λ€μƒμ΄ μ΄μ–΄μ Έ μλ” κ²ƒμ΄λ‚ λ‹¤λ¦„μ—†μ£ . μλ¥Ό λ“¤μ–΄ β€λ‚μ μΉκµ¬μ μΉκµ¬β€™ κ°€ μμ„ λ•, β€λ‚β€™λ” β€μΉκµ¬β€™λ„ κ°€λ¦¬ν‚¤κ³  β€μΉκµ¬μ μΉκµ¬β€™λ„ κ°€λ¦¬ν‚¨λ‹¤λ” κ²ƒμ…λ‹λ‹¤.

# λ‹¤μ°¨μ› ν¬μΈν„°

## μ„ μ–Έν•κΈ°

```c
char *p1;
char **p2;
char ***p3;
```

μ°¨μ›λ§νΌ *λ¥Ό λ¶™μ—¬μ¤λ‹λ‹¤.

# 2μ°¨μ› ν¬μΈν„°

λ‹¤μ°¨μ› ν¬μΈν„°λ” λ§ κ·Έλ€λ΅ 2μ°¨μ›λ„, 3μ°¨μ›λ„, 4μ°¨μ›λ„ λ  μ μμµλ‹λ‹¤. λ¬΄κ¶λ¬΄μ§„ν•©λ‹λ‹¤. κ·Έλ¬λ‚ 2μ°¨μ› ν¬μΈν„°μ μ›λ¦¬λ§ μ΄ν•΄ν•λ‹¤λ©΄, μ΄ν›„ μ°¨μ›μ€ λ‘κ°™μ€ μ›λ¦¬μ λ°λ³µμ…λ‹λ‹¤. λν• 2μ°¨μ› λ°°μ—΄μ„ λ‹¤λ£¨λ” λ°μ— μμ–΄μ„ 2μ°¨μ› ν¬μΈν„°κ°€ μ•„μ£Ό ν¨κ³Όμ μ΄κΈ° λ•λ¬Έμ—, 2μ°¨μ› ν¬μΈν„°μ— λ€ν• νƒκµ¬κ°€ ν•„μ”ν•©λ‹λ‹¤.

## 2μ°¨μ› ν¬μΈν„° μ„ μ–Έν•κΈ°

```c
short **pp;
```

## 2μ°¨μ› ν¬μΈν„°μ κµ¬μ„±

- κµ¬μ΅° - κΈ°λ³Έ

```c
short **pp, *p, data = 3;
p = &data;    // ν¬μΈν„° λ³€μ p(1μ°¨μ›)μ— data(0μ°¨μ›)μ μ£Όμ† μ €μ¥
pp = &p;    // ν¬μΈν„° λ³€μ pp(2μ°¨μ›)μ— p(1μ°¨μ›)μ μ£Όμ† μ €μ¥
**p = 5;    // dataμ μ£Όμ†μ— μ°Ύμ•„κ°€ 5λΌλ” κ°’ μ €μ¥
```

![9 2μ°¨μ›ν¬μΈν„°μκµ¬μ„±_μ •μ„](https://user-images.githubusercontent.com/97890886/161970598-b1d11185-d94b-4eda-a877-d9fbf661ff9f.png)

μ°¨μ›μ„ ν•λ‚μ”© κ±΄λ„λ›°λ©΄μ„ κ° ν¬μΈν„°κ°€ κ°€λ¦¬ν‚¤λ” λ€μƒμ΄ μ΄μ „ μ°¨μ›μ μ£Όμ†μΈ κ²½μ°κ°€ μ΄μƒμ μ΄λ‹¤. μ΄λ™ν•λ©΄μ„ μ°¨μ›μ΄ ν•λ‚μ”© μ¤„μ–΄λ“λ” κ³„λ‹¨κ°™μ€ κµ¬μ΅°λ‚ λ‹¤λ¦„μ—†λ‹¤. λν• λ°‘μ—μ„ μ‚΄ν΄λ³Ό error μμ‹μ²λΌ casingμ„ ν•΄μ¤„ ν•„μ”λ„ μ—†λ‹¤.

>κµ¬μ΅° - error!

```c
short **pp;
int data = 3;
pp = (short *) &data;    // casting ν•λ³€ν™
```

**2μ°¨μ› ν¬μΈν„° ppμ μ£Όμ†λ” 1μ°¨μ› ν¬μΈν„°μ μ£Όμ†λ¥Ό κ°€μ§€κ³  μμ–΄μ•Ό** *ppλ΅ 1μ°¨μ› ν¬μΈν„°μ— μ ‘κ·Όμ΄ κ°€λ¥ν•΄μ§€λ©° **ppλ΅ 0μ°¨μ›(λ€μƒ)μ— μ ‘κ·Όν•  μ μλ‹¤. λ§μ•½ 2μ°¨μ› ν¬μΈν„°κ°€ λ€μƒμ μ£Όμ†κ°’μ„ μ§μ ‘μ μΌλ΅ κ°–κ² λλ©΄ μ¤λ¥κ°€ λ°μƒν•λ‹¤.

>κµ¬μ΅° - 1>0>0

2μ°¨μ›>1μ°¨μ›>0μ°¨μ›(λ€μƒ)μ΄ μ•„λ‹, 1μ°¨μ›>1μ°¨μ›>0μ°¨μ›(λ€μƒ)μΈ κ²½μ°.

```c
int *q, *p, data=3;
p=&data;
q=(int *)&p;    // casting
```

![10 2μ°¨μ›ν¬μΈν„°μ κµ¬μ„±_1](https://user-images.githubusercontent.com/97890886/161970651-9be26bb1-4e46-48e0-b5e4-1201609f8c54.png)


errorλ” μ•„λ‹μ§€λ§, 1μ°¨μ› ν¬μΈν„°μ—μ„ λ‹¤μ 1μ°¨μ› ν¬μΈν„°λ΅ μ΄λ™ν•λ” κ²ƒμ΄ λ¶κ°€λ¥ν•λ―€λ΅ 2μ°¨μ› ν¬μΈν„° κµ¬μ΅°μ— λΉ„ν•΄μ„ μ‹¤μ©μ„±μ΄ λ–¨μ–΄μ§„λ‹¤.  λν• 1μ°¨μ› ν¬μΈν„°κ°€ λ‹¤λ¥Έ 1μ°¨μ› ν¬μΈν„°μ μ£Όμ†κ°’μ„ κ°€μ§€λ„λ΅ μ„ μ–Έν•λ” μ‹μ λ¶€ν„° μ΄λ―Έ μ°¨μ›μ΄ ν•λ‚ μ¦κ°€ν•κΈ° λ•λ¬Έμ— μ°¨μ›μ„ λ§μ¶”κΈ° μ„ν• catstingμ΄ λ¶κ°€ν”Όν•λ―€λ΅ λ¶νΈν•λ‹¤.

>κµ¬μ΅° - 2>0>0

2μ°¨μ›>1μ°¨μ›>0μ°¨μ›(λ€μƒ)μ΄ μ•„λ‹, 2μ°¨μ›>1μ°¨μ›>0μ°¨μ›>0μ°¨μ›μΈ κ²½μ°.

```c
short **pp, data = 3;
int ptr = (int) &data;    // μΌλ°λ³€μ ptrμ— λ€μƒ dataμ μ£Όμ† μ €μ¥
pp = (short **) &ptr;    // casting
**pp = 5;
```

![11 2μ°¨μ›ν¬μΈν„°μκµ¬μ„±_2](https://user-images.githubusercontent.com/97890886/161970703-7e4f0147-23f8-4428-a585-c71c61f54796.png)

2μ°¨μ› ν¬μΈν„°κ°€ κ°€λ¦¬ν‚¤λ” λ€μƒμ΄ 1μ°¨μ›μ΄ μ•„λ‹λΌ 0μ°¨μ›μΈ κ²½μ°λ” μ›λλ” λ¶κ°€λ¥ν•μ§€λ§, κ·Έ 0μ°¨μ›μ΄ μµμΆ… λ€μƒμ μ£Όμ† κ°’λ§ κ°€μ§€κ³  μλ‹¤λ©΄ μ–΄μ°μ €μ° κ°€λ¥μ€ ν•λ‹¤. μ¦‰ 2μ°¨μ› ν¬μΈν„°λ” 1μ°¨μ› ν¬μΈν„°κ°€ μ•„λ‹λ”λΌλ„, λ³€μ ν•νƒλ΅ μ €μ¥λ 4λ°”μ΄νΈ μ£Όμ† κ°’μ„ μ‚¬μ©ν•΄ μµμΆ… λ€μƒμ„ μ‚¬μ©ν•  μ μλ” κ²ƒμ΄λ‹¤. κ·Έλ¬λ‚ μ΄λ° ν•νƒμ—μ„λ” λ‹Ήμ—°ν•κ²λ„ ν•μ„ μ°¨μ›μ—μ„μ μ΄λ™μ€ λ¶κ°€λ¥ν•λ‹¤. λν• catingμ΄ μƒλ‹Ήν κ·€μ°®λ‹¤.

# 2μ°¨μ› ν¬μΈν„°μ™€ λ©”λ¨λ¦¬ λ™μ  ν• λ‹Ή

2μ°¨μ› ν¬μΈν„°κ°€ κ°€λ¦¬ν‚¤λ” λ€μƒμ λ©”λ¨λ¦¬λ¥Ό λ™μ  ν• λ‹Ή ν•΄λ³΄μ.

```c
short **pp, data = 3;
pp = (short **) malloc(4);    // 2μ°¨μ›μ΄ κ°€λ¦¬ν‚¤λ” λ€μƒμ μ£Όμ†λ¥Ό λ™μ ν• λ‹Ή
*pp = &data;
**pp = 5;
```

2μ°¨μ› ν¬μΈν„°λ¥Ό κµ¬μ„±ν•  λ•,  ν¬μΈν„° λ‘ κ°λ¥Ό κ°κ° μ„ μ–Έν•΄μ¤μ•Ό ν–μ„ λ•λ³΄λ‹¤ ν›¨μ”¬ λ³΄κΈ°κ°€ μΆ‹λ‹¤.

λ™μ ν• λ‹Ήλ 2λ²μ§Έ λ©”λ¨λ¦¬ κ³µκ°„μ€ λ‚λ¨Έμ§€ λ‘ κ³µκ°„κ³Ό λ‹¬λ¦¬ νΌμλ§ Heapμ΄κΈ° λ•λ¬Έμ— λ©”λ¨λ¦¬ λ²μ§“μκ°€ μ°¨μ΄κ°€ μΆ€ μλ‹¤. μ΄ 4λ°”μ΄νΈ Heap λ©”λ¨λ¦¬λ” μ—„λ°€ν λ§ν•λ©΄ ν¬μΈν„° λ³€μλ” μ•„λ‹μ§€λ§, ν¬μΈν„°μ μ—­ν• μ„ ν•κΈ° λ•λ¬Έμ— (**ppλ¥Ό μ‚¬μ©ν–μ„ λ• μ΄ λ©”λ¨λ¦¬λ¥Ό κ±°μ³, μ£Όμ†λ¥Ό μ½μ–΄μ„ λ€μƒμ„ μ°Ύμ•„κ°€λ―€λ΅) short * λ΅ μ„ μ–Έλ ν¬μΈν„°μ™€ κ°™μ€ λλ‚μ„ μ¤€λ‹¤.

```c
pp = (short **)maloc(sizeof(short *))    // short *λ” ν¬μΈν„°μ΄λ―€λ΅ ν¬κΈ°λ” 4λ°”μ΄νΈ
```

κ²°λ΅ μ μΌλ΅ μ΄ κµ¬μ΅°λ” shortν• ν¬μΈν„°λ¥Ό λ™μ μΌλ΅ λ©”λ¨λ¦¬ ν• λ‹Ήν•μ—¬ κ·Έ μ£Όμ†κ°’μ„ 2μ°¨μ› ν¬μΈν„° ppμ— μ €μ¥ν• ν•νƒλ΅, 1μ°¨μ› ν¬μΈν„° ν• κ°λ¥Ό λ™μ  ν• λ‹Ήν• κ²ƒμ΄λ‚ λ‹¤λ¦„μ—†λ‹¤.

> μ£Όμ! λ™μ  ν• λ‹Ήν• λ©”λ¨λ¦¬λ¥Ό ν•΄μ ν•λ” μμ„

```c
short **pp;
pp = (short **)malloc(sizeof(short *));
*pp = (short *)malloc(sizeof(short));

**pp=10;
printf("**pp=%d\n", **pp);
free(*pp);
free(pp);
```

λ‘ λ²μ§Έ λ©”λ¨λ¦¬μΈ ppλ” μ„Έ λ²μ§Έ λ©”λ¨λ¦¬ *ppμ μ£Όμ† κ°’μ„ κ°€μ§€κ³  μμΌλ―€λ΅, ppλ¥Ό λ¨Όμ € ν•΄μ ν•λ©΄ *ppμ κ°’μ„ μƒμ–΄λ²„λ¦¬λ―€λ΅ λ©”λ¨λ¦¬ μ†μ‹¤ μ„ν—μ΄ μλ‹¤ (λ§μΉ λ§νΈλ£μ‹μΉ΄ κµ¬μ΅°)

>2μ°¨μ›μ΄ κ°€λ¦¬ν‚¤λ” λ€μƒμ„ λ™μ μΌλ΅ ν• λ‹Ήν–μ„ λ•μ μ¥μ 

λ™μ  λ©”λ¨λ¦¬ ν• λ‹Ήμ€ κ°€λ¦¬ν‚¤λ” λ€μƒμ λ©”λ¨λ¦¬λ¥Ό λ‚λ μ„ μ—¬λ¬κ°μΈ κ²ƒμ²λΌ μ‚¬μ©ν•  μ μλ‹¤.

```c
short **pp = (short **)malloc(3 * sizeof(short *));
// μ΄ 12λ°”μ΄νΈλ¥Ό 3*4 κµ¬μ΅°λ΅, 4λ°”μ΄νΈ λ‹¨μ„λ΅ 3κ°μ”© λ‚λ μ„ μ‚¬μ©ν•λ‹¤.
```

κ°κ°μ λ©”λ¨λ¦¬λ” μ£Όμ† μ—°μ‚° λ°©λ²•μΌλ΅ *(pp+0), *(pp+1), *(pp+2)λ΅ μ ‘κ·Όν•λ‹¤.

2μ°¨μ› ν¬μΈν„° λ™μ  ν• λ‹Ή κµ¬μ΅°λ” 2μ°¨μ› λ°°μ—΄μ ν•κ³„μ (2μ°¨μ› λ°°μ—΄μ€ κ°μ²΄μ§€ν–¥κ³Όλ” κ±°λ¦¬κ°€ λ©€λ‹¤)μ„ ν•΄κ²°ν•΄μ¤„ μ μλ‹¤. μ΄λ” μμ„Έν•κ² μ΄ν›„μ λ‚΄μ©μ—μ„ λ°°μ›λ³΄κ² λ‹¤.

# 2μ°¨μ› ν¬μΈν„°μ™€ λ§¤κ°λ³€μ

>error case 1

2μ°¨μ› ν¬μΈν„°λ¥Ό μ‚¬μ©ν•μ§€ μ•μ•μ„ λ•

```c
#include <stdio.h>
#include <malloc.h>

void GetMydata(int *q)
{
    q = (int *)malloc(8);
}

void main()
{
    int *p;
    GetMydata(p);
    *p=5;
    free(p);
}
```

main ν•¨μμ ν¬μΈν„° λ³€μ pκ°€ λ§¤κ°λ³€μ int *qμ— λ³µμ‚¬λ  λ• μ›ν•μ§€ μ•λ” μ£Όμ† κ°’(μ΄κΈ°ν™”λμ§€ μ•μ€ λ³€μμ΄κΈ° λ•λ¬Έμ— λ‚¨μ•„μλ” trashκ°’)μ΄ μ „λ‹¬λμ–΄, λ©”λ¨λ¦¬λ¥Ό ν• λ‹Ήν•λ”λΌλ„ κ·Έ λ©”λ¨λ¦¬μ μ£Όμ†κ°’μ€ qμ— μ €μ¥λμ—μ„ λΏ pλ” λ³€ν™”μ—†μ΄ μ—¬μ „ν trashκ°’μ„ μ €μ¥ν•κ³  μλ‹¤.

>error case 2

error case 1μ λ³΄μ™„ : pμ— μ§μ ‘μ μΌλ΅ qμ— μ €μ¥λ λ©”λ¨λ¦¬ μ£Όμ† κ°’μ„ λ€μ…ν•΄λ³΄μ•μ„ λ•

```c
#include <stdio.h>
#include <malloc.h>

void GetMydata(int *q)
{
    q = (int *)malloc(8);
    *p = q;    // μ½”λ“ μ¶”κ°€λ΅ λ³΄μ™„
}

void main()
{
    int *p;
    GetMydata(p);
    *p=5;
    free(p);
}
```

μ΄λ ‡κ² ν•λ©΄ λ  κ±°λΌκ³  μƒκ°€ν•κ² μ§€λ§, μ• λλ‹¤. μ™λƒ? μ§€μ—­λ³€μλ” λ‹¤λ¥Έ ν•¨μμ—μ„  μ‚¬μ©ν•  μ μ—†κΈ° λ•λ¬Έμ΄λ‹¤.

>λ§¤κ°λ³€μμ— 2μ°¨μ› ν¬μΈν„°λ¥Ό μ‚¬μ©ν•΄λ³΄μ

κ³Όκ±°μ— λ°°μ› λ ν¬μΈν„°μ λ‚΄μ©μ„ μƒκΈ°μ‹μΌλ³΄μ.  


π’΅ *Aν•¨μμ—μ„ Bν•¨μμ μ§€μ—­λ³€μ pμ κ°’μ„ λ³€κ²½ν•κ³  μ‹¶λ‹¤λ©΄, Aν•¨μμ—μ„ λ§¤κ°λ³€μ qλ΅ pμ 'μ΄λ¦„(λ³€μλ…)'μ΄ μ•„λ‹ 'μ£Όμ†(ν¬μΈν„°)'λ¥Ό μ „λ‹¬λ°›μ•„ μ²λ¦¬ν•΄μ•Ό ν•λ‹¤.*


μ΄λ• μ°λ¦¬μ μμ‹μ—μ„λ” pκ°€ μΌλ° λ³€μκ°€ μ•„λ‹ (1μ°¨μ›)ν¬μΈν„° λ³€μμ΄λ―€λ΅ pμ μ£Όμ†κ°’μ„ μ „λ‹¬λ°›λ” λ§¤κ°λ³€μ qλ” 2μ°¨μ› ν¬μΈν„°μ—¬μ•Ό ν•λ” κ²ƒμ΄λ‹¤. μ°¨μ›μ΄ λ§μ•„μ•Ό ν•λ‹¤.

```c
#include <stdio.h>
#include <malloc.h>

void GetMydata(int **q)     // λ§¤κ°λ³€μ 2μ°¨μ› ν¬μΈν„° q : pμ μ£Όμ† κ°’ μ €μ¥ν•¨
{
    *q = (int *)malloc(8);      // qκ°€ κ°€λ¦¬ν‚¤λ” λ€μƒ(==p)μ— λ™μ  ν• λ‹Ήλ 8λ°”μ΄νΈμ λ©”λ¨λ¦¬ μ €μ¥
}

void main()
{
    int *p;
    GetMydata(&p);      // qμ—κ² 1μ°¨μ› ν¬μΈν„° pμ μ£Όμ†κ°’μ„ λ§¤κ°λ³€μλ΅ μ „λ‹¬
    *p=5;       // ν• λ‹Ήλ λ©”λ¨λ¦¬μ μ²« 4λ°”μ΄νΈμ— κ°’ 5 λ€μ…
    free(p);
}
```

μ΄λ ‡κ² λλ©΄, λ‚΄λ¶€μ μΌλ΅ int **q = &p; κ°€ λλ©΄μ„ μ„μ—μ„ λ°°μ› λ 2μ°¨μ› ν¬μΈν„°μ μ •μ„μ μΈ κµ¬μ΅°κ°€ λ‚μ¨λ‹¤.

# 2μ°¨μ› ν¬μΈν„°μ™€ 2μ°¨μ› λ°°μ—΄

μ—¬λ¬ κ°μ 1μ°¨μ› ν¬μΈν„°λ¥Ό ν• λ‹Ήν•λ” κ²½μ°

>2μ°¨μ› λ°°μ—΄[μ •μ ]

```c
short *p[100];    // short * ν•μ‹μ 1μ°¨μ› ν¬μΈν„° 100κ° μ„ μ–Έ
```

μ •μ  ν• λ‹Ήμ ν•κ³„μ : μ„ μ–Έν•  λ• λ©”λ¨λ¦¬ ν¬κΈ°κ°€ κ³ μ •λλ‹¤ >

1. μ΄ν›„ ν¬μΈν„°κ°€ 100κ°κ°€ μ•„λ‹ 200κ°, 300κ°κ°€ ν•„μ”ν•κ² λλ©΄ μ†μ¤μ½”λ“ μ¬μ‘μ„± λ° μ¬μ»΄νμΌμ„ ν•΄μ•Ό ν•λ―€λ΅ λ¶νΈ
2. ν¬μΈν„°λ¥Ό 100κ°λ‚ μ„ μ–Έν–λ”λ° 5κ°λ§ μ‚¬μ©λλ‹¤λ©΄ λ©”λ¨λ¦¬ λ‚­λΉ„λ¨

>2μ°¨μ› ν¬μΈν„°[λ™μ ]

```c
short **pp;
pp=(short **)malloc(sizeof(short *));
```

2μ°¨μ› ν¬μΈν„°κ°€ μ²« λ²μ§Έλ΅ κ°€λ¦¬ν‚¤λ” λ€μƒμ€ 1μ°¨μ› ν¬μΈν„°κ°€ κ°€μ¥ μ ν•©ν•μ§€λ§, μ λ€λ΅ λ μ£Όμ†κ°’λ§ κ°€μ§€κ³  μλ‹¤λ©΄ 4λ°”μ΄νΈ ν¬κΈ°μ λ©”λ¨λ¦¬λΌλ„ μƒκ΄€ μ—†μΌλ―€λ΅ mallocμΌλ΅ λ™μ  ν• λ‹Ή+λ¶„ν• ν•μ€λ‹¤.

```c
int n;
short **pp;
printf("ν• λ‹Ήλ°›μ„ λ©”λ¨λ¦¬ μµλ€κ°’ μ…λ ¥: \n");
scanf("%d", &n);
pp=(short **)malloc(sizeof(short *)*n);
```

λ‹¤μκ³Ό κ°™μ΄ μ‚¬μ©μμ—κ² μµλ€ λ©”λ¨λ¦¬ μμΉλ¥Ό μ…λ ¥λ°›μ•„ λ™μ  ν• λ‹Ήν•λ©΄, μ„μ—μ„ μ‚΄ν΄λ³΄μ•λ 2μ°¨μ› λ°°μ—΄μ ν•κ³„λ¥Ό μ»¤λ²„ν•  μ μλ‹¤.